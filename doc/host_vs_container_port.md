
# 호스트 포트와 컨테이너 포트의 차이

Docker를 사용할 때 `-p <호스트_포트>:<컨테이너_포트>` 형태로 포트를 매핑하여 외부 접근을 허용합니다. 이때 호스트 포트와 컨테이너 포트는 다음과 같은 차이를 가집니다.

---

## 1. 컨테이너 포트 (Container Port)

- 컨테이너 내부에서 서비스가 열려 있는 포트입니다.
- 예: Nginx가 컨테이너 안에서 `80` 포트로 실행 중
- Dockerfile에서 `EXPOSE 80`처럼 문서화할 수 있지만, 실제 접근은 불가능합니다.

---

## 2. 호스트 포트 (Host Port)

- 외부에서 접근할 수 있는 **호스트 머신의 포트**입니다.
- `-p` 옵션을 통해 **호스트 포트 → 컨테이너 포트**로 트래픽이 전달됩니다.
- 예: `-p 8080:80`이면 `localhost:8080` 접속 시 컨테이너 내부의 `80` 포트로 전달됩니다.

---

## 3. 예시

```bash
docker run -d -p 8080:80 nginx
```

- 호스트 포트: 8080
- 컨테이너 포트: 80
- 의미: `http://localhost:8080` 으로 접속하면, 컨테이너 내부에서 실행 중인 Nginx(80번 포트)에 도달함

---

## 4. 요약 비교

| 항목             | 호스트 포트             | 컨테이너 포트            |
|------------------|--------------------------|----------------------------|
| 위치             | Docker를 실행한 PC 또는 서버 | 컨테이너 내부             |
| 설정 방법        | `-p` 옵션 왼쪽            | `-p` 옵션 오른쪽           |
| 외부 접근 가능 여부 | 가능                     | 직접 접근 불가능            |
| 역할             | 외부 → 내부 트래픽 진입 지점 | 내부 서비스가 리스닝하는 지점 |

---

## 5. 참고

- 하나의 컨테이너 포트를 여러 호스트 포트에 매핑하는 것은 불가능
- 반대로, 여러 컨테이너가 같은 호스트 포트를 공유할 수 없음 (포트 충돌 발생)
